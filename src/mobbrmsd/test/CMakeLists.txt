find_package( unittest REQUIRED )
find_package( purelapack REQUIRED )

set(LIB_MOD_2D_DIR ${CMAKE_CURRENT_BINARY_DIR}/../mobbrmsd_2d/mod_files)
set(TARGET_2D ${PROJECT_NAME}_2d)

add_executable( test_gemm )
target_sources( test_gemm PRIVATE test_gemm.f90 )
target_include_directories( test_gemm PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_gemm PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_gemm PRIVATE unittest )
target_link_libraries( test_gemm PRIVATE ${TARGET_2D} )
add_test( NAME test_gemm COMMAND test_gemm )

add_executable( test_group_permutation )
target_sources( test_group_permutation PRIVATE test_group_permutation.f90 )
target_include_directories( test_group_permutation PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_group_permutation PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_group_permutation PRIVATE unittest )
target_link_libraries( test_group_permutation PRIVATE ${TARGET_2D} )
add_test( NAME test_group_permutation COMMAND test_group_permutation )

add_executable( test_Hungarian )
target_sources( test_Hungarian PRIVATE test_Hungarian.f90 )
target_include_directories( test_Hungarian PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_Hungarian PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_Hungarian PRIVATE unittest )
target_link_libraries( test_Hungarian PRIVATE ${TARGET_2D} )
add_test( NAME test_Hungarian COMMAND test_Hungarian )

add_executable( test_mol_block )
target_sources( test_mol_block PRIVATE test_mol_block.f90 )
target_include_directories( test_mol_block PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_mol_block PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_mol_block PRIVATE unittest )
target_link_libraries( test_mol_block PRIVATE ${TARGET_2D} )
add_test( NAME test_mol_block COMMAND test_mol_block )

add_executable( test_tree )
target_sources( test_tree PRIVATE test_tree.f90 )
target_include_directories( test_tree PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_tree PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_tree PRIVATE unittest )
target_link_libraries( test_tree PRIVATE ${TARGET_2D} )
add_test( NAME test_tree COMMAND test_tree )

add_executable( test_rotation )
target_sources( test_rotation PRIVATE mod_testutil.f90 test_rotation.f90 )
target_include_directories( test_rotation PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_rotation PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_rotation PRIVATE unittest )
target_link_libraries( test_rotation PRIVATE purelapack )
target_link_libraries( test_rotation PRIVATE ${TARGET_2D} )
add_test( NAME test_rotation COMMAND test_rotation )

add_executable( test_c_matrix )
target_sources( test_c_matrix PRIVATE mod_testutil.f90 test_c_matrix.f90 )
target_include_directories( test_c_matrix PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_c_matrix PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_c_matrix PRIVATE unittest )
target_link_libraries( test_c_matrix PRIVATE purelapack )
target_link_libraries( test_c_matrix PRIVATE ${TARGET_2D} )
add_test( NAME test_c_matrix COMMAND test_c_matrix )

add_executable( test_f_matrix )
target_sources( test_f_matrix PRIVATE mod_testutil.f90 test_f_matrix.f90 )
target_include_directories( test_f_matrix PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_f_matrix PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_f_matrix PRIVATE unittest )
target_link_libraries( test_f_matrix PRIVATE purelapack )
target_link_libraries( test_f_matrix PRIVATE ${TARGET_2D} )
add_test( NAME test_f_matrix COMMAND test_f_matrix )

add_executable( test_bb_block )
target_sources( test_bb_block PRIVATE mod_testutil.f90 test_bb_block.f90 )
target_include_directories( test_bb_block PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_bb_block PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_bb_block PRIVATE unittest )
target_link_libraries( test_bb_block PRIVATE purelapack )
target_link_libraries( test_bb_block PRIVATE ${TARGET_2D} )
add_test( NAME test_bb_block COMMAND test_bb_block )

add_executable( test_bb_list )
target_sources( test_bb_list PRIVATE mod_testutil.f90 test_bb_list.f90 )
target_include_directories( test_bb_list PRIVATE ${unittest_DIR}/mod_files )
target_include_directories( test_bb_list PRIVATE ${LIB_MOD_2D_DIR} )
target_link_libraries( test_bb_list PRIVATE unittest )
target_link_libraries( test_bb_list PRIVATE purelapack )
target_link_libraries( test_bb_list PRIVATE ${TARGET_2D} )
add_test( NAME test_bb_list COMMAND test_bb_list )

